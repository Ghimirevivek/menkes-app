{"ast":null,"code":"var _jsxFileName = \"/Users/niteshnamdev/Desktop/work/menkes-app/src/navigator/Navigator.tsx\";\nimport { useEffect } from \"react\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport * as SplashScreen from \"expo-splash-screen\";\nimport { useAppSlice, useAppService } from \"../modules/app\";\nimport { loadImages, loadFonts } from \"../theme\";\nimport { useDataPersist, DataPersistKeys } from \"../hooks\";\nimport { AuthStackNavigator, HomeStackNavigator } from \"./stack\";\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nSplashScreen.preventAutoHideAsync();\nfunction Navigator() {\n  const {\n    getUser\n  } = useAppService();\n  const {\n    dispatch,\n    setUser,\n    setLoggedIn\n  } = useAppSlice();\n  const {\n    setPersistData,\n    getPersistData\n  } = useDataPersist();\n  const {\n    loggedIn,\n    user,\n    isCheckedL\n  } = useSelector(state => state.registration);\n  const preload = async () => {\n    try {\n      await Promise.all([loadImages(), loadFonts()]);\n      const user = await getUser();\n      dispatch(setUser(user));\n      dispatch(setLoggedIn(!!user));\n      if (user) setPersistData(DataPersistKeys.USER, user);\n      SplashScreen.hideAsync();\n    } catch (err) {\n      console.log(\"[##] preload error:\", err);\n      getPersistData(DataPersistKeys.USER).then(user => {\n        if (user) {\n          dispatch(setUser(user));\n          dispatch(setLoggedIn(!!user));\n        }\n      }).finally(() => {\n        SplashScreen.hideAsync();\n      });\n    }\n  };\n  useEffect(() => {\n    preload();\n  }, []);\n  console.log(\"[##] loggedIn\", loggedIn, isCheckedL);\n  return _jsxDEV(NavigationContainer, {\n    children: isCheckedL && loggedIn ? _jsxDEV(HomeStackNavigator, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 33\n    }, this) : _jsxDEV(AuthStackNavigator, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 58\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\nexport default Navigator;","map":{"version":3,"names":["useEffect","NavigationContainer","SplashScreen","useAppSlice","useAppService","loadImages","loadFonts","useDataPersist","DataPersistKeys","AuthStackNavigator","HomeStackNavigator","useSelector","jsxDEV","_jsxDEV","preventAutoHideAsync","Navigator","getUser","dispatch","setUser","setLoggedIn","setPersistData","getPersistData","loggedIn","user","isCheckedL","state","registration","preload","Promise","all","USER","hideAsync","err","console","log","then","finally","children","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/niteshnamdev/Desktop/work/menkes-app/src/navigator/Navigator.tsx"],"sourcesContent":["import { useEffect } from \"react\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport * as SplashScreen from \"expo-splash-screen\";\nimport { useAppSlice, useAppService, IUser } from \"@/modules/app\";\nimport { loadImages, loadFonts } from \"@/theme\";\nimport { useDataPersist, DataPersistKeys } from \"@/hooks\";\n\nimport { AuthStackNavigator, HomeStackNavigator } from \"./stack\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"@/redux/store\";\n\n// keep the splash screen visible while complete fetching resources\nSplashScreen.preventAutoHideAsync();\n\nfunction Navigator() {\n  const { getUser } = useAppService();\n  const { dispatch, setUser, setLoggedIn } = useAppSlice();\n  const { setPersistData, getPersistData } = useDataPersist();\n  const { loggedIn, user, isCheckedL } = useSelector(\n    (state: RootState) => state.registration\n  );\n\n  const preload = async () => {\n    try {\n      await Promise.all([loadImages(), loadFonts()]);\n\n      const user = await getUser();\n\n      dispatch(setUser(user));\n      dispatch(setLoggedIn(!!user));\n\n      if (user) setPersistData<IUser>(DataPersistKeys.USER, user);\n\n      SplashScreen.hideAsync();\n    } catch (err) {\n      console.log(\"[##] preload error:\", err);\n\n      getPersistData<IUser>(DataPersistKeys.USER)\n        .then((user) => {\n          if (user) {\n            dispatch(setUser(user));\n            dispatch(setLoggedIn(!!user));\n          }\n        })\n        .finally(() => {\n          SplashScreen.hideAsync();\n        });\n    }\n  };\n\n  useEffect(() => {\n    preload();\n  }, []);\n\n  // TODO: switch router by loggedIn status\n  console.log(\"[##] loggedIn\", loggedIn, isCheckedL);\n\n  return (\n    <NavigationContainer>\n      {isCheckedL && loggedIn ? <HomeStackNavigator /> : <AuthStackNavigator />}\n    </NavigationContainer>\n  );\n}\n\nexport default Navigator;\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,mBAAmB,QAAQ,0BAA0B;AAC9D,OAAO,KAAKC,YAAY,MAAM,oBAAoB;AAClD,SAASC,WAAW,EAAEC,aAAa;AACnC,SAASC,UAAU,EAAEC,SAAS;AAC9B,SAASC,cAAc,EAAEC,eAAe;AAExC,SAASC,kBAAkB,EAAEC,kBAAkB;AAC/C,SAASC,WAAW,QAAQ,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAI1CX,YAAY,CAACY,oBAAoB,CAAC,CAAC;AAEnC,SAASC,SAASA,CAAA,EAAG;EACnB,MAAM;IAAEC;EAAQ,CAAC,GAAGZ,aAAa,CAAC,CAAC;EACnC,MAAM;IAAEa,QAAQ;IAAEC,OAAO;IAAEC;EAAY,CAAC,GAAGhB,WAAW,CAAC,CAAC;EACxD,MAAM;IAAEiB,cAAc;IAAEC;EAAe,CAAC,GAAGd,cAAc,CAAC,CAAC;EAC3D,MAAM;IAAEe,QAAQ;IAAEC,IAAI;IAAEC;EAAW,CAAC,GAAGb,WAAW,CAC/Cc,KAAgB,IAAKA,KAAK,CAACC,YAC9B,CAAC;EAED,MAAMC,OAAO,GAAG,MAAAA,CAAA,KAAY;IAC1B,IAAI;MACF,MAAMC,OAAO,CAACC,GAAG,CAAC,CAACxB,UAAU,CAAC,CAAC,EAAEC,SAAS,CAAC,CAAC,CAAC,CAAC;MAE9C,MAAMiB,IAAI,GAAG,MAAMP,OAAO,CAAC,CAAC;MAE5BC,QAAQ,CAACC,OAAO,CAACK,IAAI,CAAC,CAAC;MACvBN,QAAQ,CAACE,WAAW,CAAC,CAAC,CAACI,IAAI,CAAC,CAAC;MAE7B,IAAIA,IAAI,EAAEH,cAAc,CAAQZ,eAAe,CAACsB,IAAI,EAAEP,IAAI,CAAC;MAE3DrB,YAAY,CAAC6B,SAAS,CAAC,CAAC;IAC1B,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEF,GAAG,CAAC;MAEvCX,cAAc,CAAQb,eAAe,CAACsB,IAAI,CAAC,CACxCK,IAAI,CAAEZ,IAAI,IAAK;QACd,IAAIA,IAAI,EAAE;UACRN,QAAQ,CAACC,OAAO,CAACK,IAAI,CAAC,CAAC;UACvBN,QAAQ,CAACE,WAAW,CAAC,CAAC,CAACI,IAAI,CAAC,CAAC;QAC/B;MACF,CAAC,CAAC,CACDa,OAAO,CAAC,MAAM;QACblC,YAAY,CAAC6B,SAAS,CAAC,CAAC;MAC1B,CAAC,CAAC;IACN;EACF,CAAC;EAED/B,SAAS,CAAC,MAAM;IACd2B,OAAO,CAAC,CAAC;EACX,CAAC,EAAE,EAAE,CAAC;EAGNM,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEZ,QAAQ,EAAEE,UAAU,CAAC;EAElD,OACEX,OAAA,CAACZ,mBAAmB;IAAAoC,QAAA,EACjBb,UAAU,IAAIF,QAAQ,GAAGT,OAAA,CAACH,kBAAkB;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,GAAG5B,OAAA,CAACJ,kBAAkB;MAAA6B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtD,CAAC;AAE1B;AAEA,eAAe1B,SAAS","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}